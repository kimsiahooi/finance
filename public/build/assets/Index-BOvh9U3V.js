import{_ as $,P as K,a as E,T as P,u as j,b as A,c as I,d as U}from"./useDecimal-DZMvIqC3.js";import{_ as u}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CRcIa3xj.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-BdcgxDqI.js";import{_ as q,a as F,b as L,c as R,d as z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-ArPcmU-P.js";import{_ as G,a as H}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DiOaYzAd.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-BqjVPbSy.js";import{_ as M}from"./Textarea.vue_vue_type_script_setup_true_lang-Bv4Rn_vN.js";import{u as O,p as Q}from"./pickBy-Ccr5mJHu.js";import{i as p,e as W,d as X,s as Y,_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-w4VtORb5.js";import{_ as ee,L as te}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-BttkMJJm.js";import{d as ae}from"./index-4Ns3tNZl.js";import{d as se,c as _,h as i,r as re,z as oe,f,i as m,j as a,u as t,k as ie,l as s,m as c,e as C,s as l,A as le,B as ne,q as v,C as V,p as ce,F as me}from"./app-DVjta_PH.js";import"./createLucideIcon-edMO2elN.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-DcOo7MYK.js";import"./VisuallyHidden-CNyKNt4L.js";import"./useForwardExpose-Cr7AmhPJ.js";import"./chevron-left-x8gv47_b.js";import"./RovingFocusGroup-Bj_x9gZy.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-ChxYR7ee.js";import"./useNonce-Ft2nU0rA.js";import"./chevron-down-C5Tst6ul.js";import"./check-CqZ2xmRr.js";import"./useArrowNavigation-C6Y-ieo6.js";const de={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ue={class:"flex flex-wrap items-center justify-end gap-2"},pe={class:"grid w-full items-center gap-1.5"},_e={key:0,class:"text-destructive"},fe={class:"grid w-full items-center gap-1.5"},ve={key:0,class:"text-destructive"},ge={class:"flex flex-wrap items-center justify-end gap-2"},Re=se({layout:ee,__name:"Index",props:{categories:{},report:{}},setup(S){const g=S,{params:x}=O(),{formatDecimal:y}=j(),N=_(()=>[{title:"Dashboard",href:ae().url},{title:"Transaction Categories",href:p().url}]),k=_(()=>[{accessorKey:"actions",header:()=>"Actions",cell:({row:r})=>{const e=r.original;return i("div",{class:"flex items-center gap-2"},[i($,{text:"Edit",href:W({category:e.id}).url,icon:K}),i(E,{title:`Delete ${e.name}`,route:X({category:e.id}).url,asChild:!1},()=>i($,{variant:"destructive",text:"Delete",icon:P}))])}},{accessorKey:"id",header:"ID",cell:({row:r})=>i("div",null,r.getValue("id"))},{accessorKey:"name",header:()=>"Name",cell:({row:r})=>i("div",null,r.getValue("name"))},{accessorKey:"description",header:()=>"Description",cell:({row:r})=>i("div",null,r.getValue("description"))},{accessorKey:"transactions_sum_amount",header:()=>i("div",{class:"text-right"},"Total Amount"),cell:({row:r})=>{const{transactions_sum_amount:e}=r.original;return i("div",{class:["text-right",e&&+e<0&&"text-destructive"]},y(r.getValue("transactions_sum_amount")))},footer:()=>i("div",{class:["text-right",g.report.total_amount<0&&"text-destructive"]},y(g.report.total_amount))}]),w=_(()=>({})),n=re({entries:x.entries??"10",search:x.search}),d=oe({open:!1}),h=()=>C.visit(p({query:Q(n.value)}),{preserveScroll:!0,preserveState:!0}),T=()=>C.visit(p()),B=()=>{d.open=!1};return(r,e)=>(m(),f(me,null,[a(t(ie),{title:"Transactions"}),a(Z,{breadcrumbs:N.value},{default:s(()=>[c("div",de,[a(t(A),{onSearch:h,onReset:T},{default:s(()=>[a(t(I),{label:"Name",placeholder:"Search ID, Name, Description","model-value":n.value.search,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.search=o)},null,8,["model-value"])]),_:1}),c("div",ue,[a(t(q),{open:d.open,"onUpdate:open":e[1]||(e[1]=o=>d.open=o)},{default:s(()=>[a(t(G),{"as-child":""},{default:s(()=>[a(t(u),{type:"button",class:"cursor-pointer"},{default:s(()=>e[3]||(e[3]=[l(" Create ",-1)])),_:1,__:[3]})]),_:1}),a(t(F),{class:"sm:max-w-[425px]"},{default:s(()=>[a(t(L),null,{default:s(()=>[a(t(R),null,{default:s(()=>e[4]||(e[4]=[l(" Create Transaction Category ",-1)])),_:1,__:[4]}),a(t(z))]),_:1}),a(t(le),ne(t(Y).form(),{class:"space-y-3","disable-while-processing":"","reset-on-success":"",options:{preserveScroll:!0,preserveState:!0},onSuccess:B}),{default:s(({errors:o,processing:b})=>[c("div",pe,[a(t(D),{for:"name"},{default:s(()=>e[5]||(e[5]=[l("Name",-1)])),_:1,__:[5]}),a(t(J),{name:"name",type:"text",placeholder:"Enter Name"}),o.name?(m(),f("p",_e,V(o.name),1)):v("",!0)]),c("div",fe,[a(t(D),{for:"description"},{default:s(()=>e[6]||(e[6]=[l("Description",-1)])),_:1,__:[6]}),a(t(M),{name:"description",placeholder:"Enter Description"}),o.description?(m(),f("p",ve,V(o.description),1)):v("",!0)]),c("div",ge,[a(t(H),{"as-child":""},{default:s(()=>[a(t(u),{class:"cursor-pointer",variant:"secondary"},{default:s(()=>e[7]||(e[7]=[l(" Cancel ",-1)])),_:1,__:[7]})]),_:1}),a(t(u),{type:"submit",class:"cursor-pointer",disabled:b},{default:s(()=>[b?(m(),ce(t(te),{key:0,class:"animate-spin"})):v("",!0),e[8]||(e[8]=l(" Create ",-1))]),_:2,__:[8]},1032,["disabled"])])]),_:1},16)]),_:1})]),_:1},8,["open"])]),a(t(U),{"model-value":n.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),columns:k.value,"paginate-data":r.categories,"column-visibility":w.value,onSearch:h},null,8,["model-value","columns","paginate-data","column-visibility"])])]),_:1},8,["breadcrumbs"])],64))}});export{Re as default};
