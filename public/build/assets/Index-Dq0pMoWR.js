import{u as K,_ as $,P as E,a as P,T as j,b as A,c as I,d as U,e as q,p as F}from"./pickBy-D5OM8GrG.js";import{_ as u}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cwealnof.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-BClJXDIt.js";import{_ as L,a as R,b as z,c as G,d as H}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Jd7XZZzW.js";import{_ as J,a as M}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-8Z74fFKQ.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-CdKwQ-og.js";import{_ as Q,a as W,L as X}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-DV7fKLlu.js";import{i as p,e as Y,d as Z,s as ee,_ as ae}from"./AppLayout.vue_vue_type_script_setup_true_lang-BOqev7rx.js";import{d as te}from"./index-4Ns3tNZl.js";import{d as se,c as _,h as i,r as re,q as oe,e as f,f as d,i as t,u as a,j as ie,k as s,l as c,s as V,v as l,x as le,y as ne,z as v,A as C,B as ce,F as de}from"./app-bwWs2Vyz.js";import"./createLucideIcon-CdoQpKKl.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-nJ_IR0sN.js";import"./VisuallyHidden-BcIEm5SQ.js";import"./useForwardExpose-D1htgUzY.js";import"./chevron-left-H80b1oRV.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-CkGsT62r.js";import"./RovingFocusGroup-DsA5kvN4.js";import"./check-BLxMFHZv.js";import"./useArrowNavigation-C6Y-ieo6.js";const me={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ue={class:"flex flex-wrap items-center justify-end gap-2"},pe={class:"grid w-full items-center gap-1.5"},_e={key:0,class:"text-destructive"},fe={class:"grid w-full items-center gap-1.5"},ve={key:0,class:"text-destructive"},ge={class:"flex flex-wrap items-center justify-end gap-2"},Ue=se({layout:Q,__name:"Index",props:{categories:{},report:{}},setup(S){const g=S,{params:x}=K(),{formatDecimal:y}=A(),N=_(()=>[{title:"Dashboard",href:te().url},{title:"Transaction Categories",href:p().url}]),k=_(()=>[{accessorKey:"actions",header:()=>"Actions",cell:({row:r})=>{const e=r.original;return i("div",{class:"flex items-center gap-2"},[i($,{text:"Edit",href:Y({category:e.id}).url,icon:E}),i(P,{title:`Delete ${e.name}`,route:Z({category:e.id}).url,asChild:!1},()=>i($,{variant:"destructive",text:"Delete",icon:j}))])}},{accessorKey:"id",header:"ID",cell:({row:r})=>i("div",null,r.getValue("id"))},{accessorKey:"name",header:()=>"Name",cell:({row:r})=>i("div",null,r.getValue("name"))},{accessorKey:"description",header:()=>"Description",cell:({row:r})=>i("div",null,r.getValue("description"))},{accessorKey:"transactions_sum_amount",header:()=>i("div",{class:"text-right"},"Total Amount"),cell:({row:r})=>{const{transactions_sum_amount:e}=r.original;return i("div",{class:["text-right",e&&+e<0&&"text-destructive"]},y(r.getValue("transactions_sum_amount")))},footer:()=>i("div",{class:["text-right",g.report.total_amount<0&&"text-destructive"]},y(g.report.total_amount))}]),w=_(()=>({})),n=re({entries:x.entries??"10",search:x.search}),m=oe({open:!1}),h=()=>V.visit(p({query:F(n.value)}),{preserveScroll:!0,preserveState:!0}),T=()=>V.visit(p()),B=()=>{m.open=!1};return(r,e)=>(d(),f(de,null,[t(a(ie),{title:"Transactions"}),t(ae,{breadcrumbs:N.value},{default:s(()=>[c("div",me,[t(a(I),{onSearch:h,onReset:T},{default:s(()=>[t(a(U),{label:"Name",placeholder:"Search ID, Name, Description","model-value":n.value.search,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.search=o)},null,8,["model-value"])]),_:1}),c("div",ue,[t(a(L),{open:m.open,"onUpdate:open":e[1]||(e[1]=o=>m.open=o)},{default:s(()=>[t(a(J),{"as-child":""},{default:s(()=>[t(a(u),{type:"button",class:"cursor-pointer"},{default:s(()=>e[3]||(e[3]=[l(" Create ",-1)])),_:1,__:[3]})]),_:1}),t(a(R),{class:"sm:max-w-[425px]"},{default:s(()=>[t(a(z),null,{default:s(()=>[t(a(G),null,{default:s(()=>e[4]||(e[4]=[l(" Create Transaction Category ",-1)])),_:1,__:[4]}),t(a(H))]),_:1}),t(a(le),ne(a(ee).form(),{class:"space-y-3","disable-while-processing":"","reset-on-success":"",options:{preserveScroll:!0,preserveState:!0},onSuccess:B}),{default:s(({errors:o,processing:b})=>[c("div",pe,[t(a(D),{for:"name"},{default:s(()=>e[5]||(e[5]=[l("Name",-1)])),_:1,__:[5]}),t(a(O),{name:"name",type:"text",placeholder:"Enter Name"}),o.name?(d(),f("p",_e,C(o.name),1)):v("",!0)]),c("div",fe,[t(a(D),{for:"description"},{default:s(()=>e[6]||(e[6]=[l("Description",-1)])),_:1,__:[6]}),t(a(W),{name:"description",placeholder:"Enter Description"}),o.description?(d(),f("p",ve,C(o.description),1)):v("",!0)]),c("div",ge,[t(a(M),{"as-child":""},{default:s(()=>[t(a(u),{class:"cursor-pointer",variant:"secondary"},{default:s(()=>e[7]||(e[7]=[l(" Cancel ",-1)])),_:1,__:[7]})]),_:1}),t(a(u),{type:"submit",class:"cursor-pointer",disabled:b},{default:s(()=>[b?(d(),ce(a(X),{key:0,class:"animate-spin"})):v("",!0),e[8]||(e[8]=l(" Create ",-1))]),_:2,__:[8]},1032,["disabled"])])]),_:1},16)]),_:1})]),_:1},8,["open"])]),t(a(q),{"model-value":n.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),columns:k.value,"paginate-data":r.categories,"column-visibility":w.value,onSearch:h},null,8,["model-value","columns","paginate-data","column-visibility"])])]),_:1},8,["breadcrumbs"])],64))}});export{Ue as default};
