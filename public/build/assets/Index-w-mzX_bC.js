import{u as K,_ as $,P as E,a as P,T as j,b as I,c as U,d as q,e as A,p as F}from"./pickBy-C2j_ft4c.js";import{_ as u}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWEdwFh6.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-B1pWEwKH.js";import{_ as L,a as R,b as z,c as G,d as H}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cg8PVcHd.js";import{_ as J,a as M}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BVdLLGSe.js";import{_ as O}from"./Input.vue_vue_type_script_setup_true_lang-Dr8j355P.js";import{_ as Q,a as W,L as X}from"./AppMainLayout.vue_vue_type_script_setup_true_lang-v9a-6XZ3.js";import{i as p,e as Y,d as Z,s as ee,_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-BdbGbtog.js";import{d as ae}from"./index-4Ns3tNZl.js";import{d as se,e as _,i,r as re,j as oe,c as f,o as d,a,u as t,h as ie,w as s,b as c,k as V,l,m as le,n as ne,p as v,t as C,q as ce,F as de}from"./app-CQtO--We.js";import"./createLucideIcon-BikQuTVU.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-DuuJcrxZ.js";import"./VisuallyHidden-CTCSWvpW.js";import"./useForwardExpose-gFSYt8Ms.js";import"./chevron-left-B0ruvHHq.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-Bmj4Uv6p.js";import"./RovingFocusGroup-Cq91DBlF.js";import"./check-DdW1eZm-.js";import"./useArrowNavigation-C6Y-ieo6.js";const me={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ue={class:"flex flex-wrap items-center justify-end gap-2"},pe={class:"grid w-full items-center gap-1.5"},_e={key:0,class:"text-destructive"},fe={class:"grid w-full items-center gap-1.5"},ve={key:0,class:"text-destructive"},ge={class:"flex flex-wrap items-center justify-end gap-2"},qe=se({layout:Q,__name:"Index",props:{categories:{},report:{}},setup(S){const g=S,{params:x}=K(),{formatDecimal:y}=I(),N=_(()=>[{title:"Dashboard",href:ae().url},{title:"Transaction Categories",href:p().url}]),k=_(()=>[{accessorKey:"actions",header:()=>"Actions",cell:({row:r})=>{const e=r.original;return i("div",{class:"flex items-center gap-2"},[i($,{text:"Edit",href:Y({category:e.id}).url,icon:E}),i(P,{title:`Delete ${e.name}`,route:Z({category:e.id}).url,asChild:!1},()=>i($,{variant:"destructive",text:"Delete",icon:j}))])}},{accessorKey:"id",header:"ID",cell:({row:r})=>i("div",null,r.getValue("id"))},{accessorKey:"name",header:()=>"Name",cell:({row:r})=>i("div",null,r.getValue("name"))},{accessorKey:"description",header:()=>"Description",cell:({row:r})=>i("div",null,r.getValue("description"))},{accessorKey:"transactions_sum_amount",header:()=>i("div",{class:"text-right"},"Total Amount"),cell:({row:r})=>{const{transactions_sum_amount:e}=r.original;return i("div",{class:["text-right",e&&+e<0&&"text-destructive"]},y(r.getValue("transactions_sum_amount")))},footer:()=>i("div",{class:["text-right",g.report.total_amount<0&&"text-destructive"]},y(g.report.total_amount))}]),w=_(()=>({})),n=re({entries:x.get("entries")??"10",search:x.get("search")??void 0}),m=oe({open:!1}),h=()=>V.visit(p({query:F(n.value)}),{preserveScroll:!0,preserveState:!0}),T=()=>V.visit(p()),B=()=>{m.open=!1};return(r,e)=>(d(),f(de,null,[a(t(ie),{title:"Transactions"}),a(te,{breadcrumbs:N.value},{default:s(()=>[c("div",me,[a(t(U),{onSearch:h,onReset:T},{default:s(()=>[a(t(q),{label:"Name",placeholder:"Search ID, Name, Description","model-value":n.value.search,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.search=o)},null,8,["model-value"])]),_:1}),c("div",ue,[a(t(L),{open:m.open,"onUpdate:open":e[1]||(e[1]=o=>m.open=o)},{default:s(()=>[a(t(J),{"as-child":""},{default:s(()=>[a(t(u),{type:"button",class:"cursor-pointer"},{default:s(()=>e[3]||(e[3]=[l(" Create ",-1)])),_:1,__:[3]})]),_:1}),a(t(R),{class:"sm:max-w-[425px]"},{default:s(()=>[a(t(z),null,{default:s(()=>[a(t(G),null,{default:s(()=>e[4]||(e[4]=[l(" Create Transaction Category ",-1)])),_:1,__:[4]}),a(t(H))]),_:1}),a(t(le),ne(t(ee).form(),{class:"space-y-3","disable-while-processing":"","reset-on-success":"",options:{preserveScroll:!0,preserveState:!0},onSuccess:B}),{default:s(({errors:o,processing:b})=>[c("div",pe,[a(t(D),{for:"name"},{default:s(()=>e[5]||(e[5]=[l("Name",-1)])),_:1,__:[5]}),a(t(O),{name:"name",type:"text",placeholder:"Enter Name"}),o.name?(d(),f("p",_e,C(o.name),1)):v("",!0)]),c("div",fe,[a(t(D),{for:"description"},{default:s(()=>e[6]||(e[6]=[l("Description",-1)])),_:1,__:[6]}),a(t(W),{name:"description",placeholder:"Enter Description"}),o.description?(d(),f("p",ve,C(o.description),1)):v("",!0)]),c("div",ge,[a(t(M),{"as-child":""},{default:s(()=>[a(t(u),{class:"cursor-pointer",variant:"secondary"},{default:s(()=>e[7]||(e[7]=[l(" Cancel ",-1)])),_:1,__:[7]})]),_:1}),a(t(u),{type:"submit",class:"cursor-pointer",disabled:b},{default:s(()=>[b?(d(),ce(t(X),{key:0,class:"animate-spin"})):v("",!0),e[8]||(e[8]=l(" Create ",-1))]),_:2,__:[8]},1032,["disabled"])])]),_:1},16)]),_:1})]),_:1},8,["open"])]),a(t(A),{"model-value":n.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),columns:k.value,"paginate-data":r.categories,"column-visibility":w.value,onSearch:h},null,8,["model-value","columns","paginate-data","column-visibility"])])]),_:1},8,["breadcrumbs"])],64))}});export{qe as default};
